import{_ as V}from"./pageContent-hl2ERUHN.js";import{q as p,t as E,v as x,x as y,o as F,a as P,w as s,z as o,C as U,A as w,b_ as k,E as C}from"./index-Cmhkly_r.js";import{_ as I,E as T}from"./_plugin-vue_export-helper-Bo3ObqG9.js";import{E as q,a as B}from"./el-form-item-Ce2-oa-m.js";import{E as S}from"./el-input-D0IuBTed.js";import"./_baseClone-B47dmfT7.js";const h={class:"button-content"},N={__name:"resetPassword",setup(R){const l=p(null),e=p({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码应为 6~15个 非空字符",trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码应为 6~15个 非空字符",trigger:"blur"}],re_pwd:[{required:!0,message:"确认新密码不能为空",trigger:"blur"},{validator:(d,t,r)=>{t!==e.value.new_pwd?r(new Error("两次输入的密码不一致")):r()},trigger:"blur"}]},c=()=>{l.value.resetFields()},f=E(),_=x();let u=p(null);y(()=>{u.value&&clearTimeout(u.value)});const g=async()=>{await l.value.validate();const{data:{message:d}}=await k(e.value);C.success(d),_.setToken(""),_.setUserInfo({}),u.value=setTimeout(()=>{f.push("/")},1e3)};return(d,t)=>{const r=S,n=q,v=B,m=T,b=V;return F(),P(b,{title:"重置密码"},{default:s(()=>[o(v,{model:e.value,rules:i,ref_key:"passwordFormRef",ref:l,"label-width":"100px"},{default:s(()=>[o(n,{label:"原密码",prop:"old_pwd"},{default:s(()=>[o(r,{type:"password","show-password":"",modelValue:e.value.old_pwd,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.old_pwd=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"新密码",prop:"new_pwd"},{default:s(()=>[o(r,{type:"password","show-password":"",modelValue:e.value.new_pwd,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.new_pwd=a)},null,8,["modelValue"])]),_:1}),o(n,{label:"确认新密码",prop:"re_pwd"},{default:s(()=>[o(r,{type:"password","show-password":"",modelValue:e.value.re_pwd,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.re_pwd=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),U("div",h,[o(m,{type:"primary",onClick:g},{default:s(()=>[w("修改密码")]),_:1}),o(m,{onClick:c},{default:s(()=>[w("重置")]),_:1})])]),_:1})}}},G=I(N,[["__scopeId","data-v-62a39942"]]);export{G as default};
