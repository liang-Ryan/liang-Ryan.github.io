import{_ as E}from"./pageContent-D3KgZijd.js";import{q as u,v as w,o as l,a as _,w as t,z as s,y as I,e as n,A as p,bM as x,E as A,O as U,aU as i,bN as b}from"./index-Bxo_YMFf.js";import{_ as h,E as B}from"./_plugin-vue_export-helper-CG1wJug_.js";import{E as C}from"./el-progress-C9o4cMsh.js";import"./_baseClone-oW3Jjo-c.js";import"./isEqual-DRkGZlPl.js";const R=["src"],N={__name:"avatar",setup(q){const c=u(null),a=u(""),{userInfo:{user_pic:d},getUserInfo:f}=w();a.value=d;const m=o=>{const e=new FileReader;e.readAsDataURL(o.raw),e.onload=()=>{a.value=e.result,console.log(a.value)}},v=async()=>{const{data:{message:o}}=await x(a.value);A.success(o),f()};return(o,e)=>{const g=U,k=C,r=B,y=E;return l(),_(y,{title:"更换头像"},{default:t(()=>[s(k,{class:"avatar-uploader",ref_key:"uploadRef",ref:c,"show-file-list":!1,"auto-upload":!1,"on-change":m},{default:t(()=>[a.value?(l(),I("img",{key:0,src:a.value,class:"avatar"},null,8,R)):(l(),_(g,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[s(n(i))]),_:1}))]),_:1},512),s(r,{type:"primary",icon:n(i),onClick:e[0]||(e[0]=M=>c.value.$el.querySelector("input").click())},{default:t(()=>[p("选择图片")]),_:1},8,["icon"]),s(r,{type:"success",icon:n(b),onClick:v},{default:t(()=>[p("上传头像")]),_:1},8,["icon"])]),_:1})}}},F=h(N,[["__scopeId","data-v-24b739a5"]]);export{F as default};
