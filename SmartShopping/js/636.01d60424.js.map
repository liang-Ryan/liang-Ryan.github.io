{"version":3,"file":"js/636.01d60424.js","mappings":"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","sources":["webpack://smart-shopping/./src/views/address/index.vue","webpack://smart-shopping/./src/api/address.js","webpack://smart-shopping/src/views/address/index.vue","webpack://smart-shopping/./src/views/address/index.vue?12d6","webpack://smart-shopping/./src/views/address/index.vue?812f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-content\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"收货地址\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.toPay()}}}),_c('div',{staticClass:\"address-list\"},[_c('van-radio-group',{model:{value:(_vm.defaultAddressId),callback:function ($$v) {_vm.defaultAddressId=$$v},expression:\"defaultAddressId\"}},_vm._l((_vm.addressList),function(item){return _c('div',{key:item.address_id,staticClass:\"address-item\"},[_c('div',{staticClass:\"item-top\"},[_c('span',[_vm._v(_vm._s(item.name))]),_c('span',[_vm._v(_vm._s(item.phone))])]),_c('div',{staticClass:\"item-content\"},[_c('div',[_vm._v(_vm._s(_vm.addressDetail(item)))])]),_c('hr'),_c('div',{staticClass:\"item-bottom\"},[_c('van-radio',{attrs:{\"name\":item.address_id},on:{\"click\":function($event){return _vm.setDefaultAddress(item.address_id)}}},[_c('span',{domProps:{\"innerHTML\":_vm._s(item.address_id === _vm.defaultAddressId ? '默认' : '选择')}})]),_c('div',{staticClass:\"item-function\"},[_c('span',{on:{\"click\":function($event){return _vm.toAddressEdit(\n              item.name,\n              item.phone,\n              item.region.province,\n              item.region.city,\n              item.region.region,\n              item.detail,\n            )}}},[_c('van-icon',{attrs:{\"name\":\"edit\"}}),_vm._v(\"编辑\")],1),_c('span',{on:{\"click\":function($event){return _vm.delAddress(item.address_id)}}},[_c('van-icon',{attrs:{\"name\":\"delete-o\"}}),_vm._v(\"删除\")],1)])],1)])}),0)],1),_c('div',{staticClass:\"footer\"},[_c('div',{on:{\"click\":function($event){return _vm.$router.push('/addressEdit')}}},[_vm._v(\"添加新地址\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 获取默认收获地址id\r\nexport const addressGetDefaultIdAPI = () => {\r\n  return request.get('/address/defaultId')\r\n}\r\n// 获取地址详情\r\nexport const addressGetDetailAPI = (id) => {\r\n  return request.get('/address/detail', {\r\n    params: {\r\n      addressId: id\r\n    }\r\n  })\r\n}\r\n\r\n// 获取收货地址列表\r\nexport const addressGetListAPI = () => {\r\n  return request.get('/address/list')\r\n}\r\n\r\n// 修改默认收货地址\r\nexport const addressPostDefaultAPI = (id) => {\r\n  return request.post('/address/setDefault', {\r\n    addressId: id\r\n  })\r\n}\r\n\r\n// 删除收货地址\r\nexport const addressPostRemoveAPI = (id) => {\r\n  return request.post('/address/remove', {\r\n    addressId: id\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"main-content\">\r\n    <van-nav-bar fixed title=\"收货地址\" left-arrow @click-left=\"toPay()\" />\r\n\r\n    <!-- 地址主体 -->\r\n    <div class=\"address-list\">\r\n      <van-radio-group v-model=\"defaultAddressId\">\r\n        <div class=\"address-item\" v-for=\"item in addressList\" :key=\"item.address_id\">\r\n          <div class=\"item-top\">\r\n            <span>{{ item.name }}</span>\r\n            <span>{{ item.phone }}</span>\r\n          </div>\r\n\r\n          <div class=\"item-content\">\r\n            <div>{{ addressDetail(item) }}</div>\r\n          </div>\r\n\r\n          <hr>\r\n\r\n          <div class=\"item-bottom\">\r\n            <van-radio :name=\"item.address_id\" @click=\"setDefaultAddress(item.address_id)\">\r\n              <span v-html=\"item.address_id === defaultAddressId ? '默认' : '选择'\"></span>\r\n            </van-radio>\r\n\r\n            <div class=\"item-function\">\r\n              <span @click=\"toAddressEdit(\r\n                item.name,\r\n                item.phone,\r\n                item.region.province,\r\n                item.region.city,\r\n                item.region.region,\r\n                item.detail,\r\n              )\"><van-icon name=\"edit\" />编辑</span>\r\n              <span @click=\"delAddress(item.address_id)\"><van-icon name=\"delete-o\" />删除</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-radio-group>\r\n    </div>\r\n\r\n    <!-- 底部功能 -->\r\n    <div class=\"footer\">\r\n      <div @click=\"$router.push('/addressEdit')\">添加新地址</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addressPostRemoveAPI, addressGetListAPI, addressGetDefaultIdAPI, addressPostDefaultAPI } from '@/api/address'\r\nimport { Dialog } from 'vant'\r\n\r\nexport default {\r\n  name: 'addressPage',\r\n  created () {\r\n    this.getList()\r\n    this.getDefaultAddress()\r\n  },\r\n  data () {\r\n    return {\r\n      addressList: [],\r\n      defaultAddressId: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取默认收货地址\r\n    async getDefaultAddress () {\r\n      const { data: { defaultId } } = await addressGetDefaultIdAPI()\r\n      this.defaultAddressId = defaultId\r\n    },\r\n\r\n    // 获取地址列表\r\n    async getList () {\r\n      const { data: { list } } = await addressGetListAPI()\r\n      this.addressList = list\r\n    },\r\n\r\n    // 拼接详细地址\r\n    addressDetail (address) {\r\n      const { province, city, region } = address.region\r\n      return province + ' ' + city + ' ' + region + ' ' + address.detail\r\n    },\r\n\r\n    // 修改默认收货地址\r\n    async setDefaultAddress (id) {\r\n      await addressPostDefaultAPI(id)\r\n      this.$toast('修改默认收货地址成功')\r\n    },\r\n\r\n    // 传递编辑地址参数\r\n    toAddressEdit (name, phone, province, city, region, detail) {\r\n      this.$router.push({\r\n        path: '/addressEdit',\r\n        query: {\r\n          addressName: name,\r\n          addressPhone: phone,\r\n          addressRegion: province + city + region,\r\n          addressDetail: detail\r\n        }\r\n      })\r\n    },\r\n\r\n    // 删除收货地址\r\n    async delAddress (id) {\r\n      Dialog.confirm({\r\n        message: '确认删除该地址吗？'\r\n      })\r\n        .then(async () => {\r\n          const { message } = await addressPostRemoveAPI(id)\r\n          this.$toast(message)\r\n          this.getList()\r\n        })\r\n        .catch(() => {\r\n        })\r\n    },\r\n\r\n    // 返回订单结算页\r\n    toPay () {\r\n      this.$router.push({\r\n        path: '/pay',\r\n        query: {\r\n          mode: this.$route.query.mode,\r\n          obj: this.$route.query.obj\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.main-content {\r\n  padding: 46px 0;\r\n  background-color: rgb(250, 250, 250);\r\n\r\n  // 地址样式\r\n  .address-list{\r\n    .address-item {\r\n      padding: 25px;\r\n      margin: 20px;\r\n      border-radius: 11px;\r\n      background-color: #fff;\r\n      box-shadow: 0 1px 3px 0 rgba(0,0,0,0.05);\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n\r\n      .item-top {\r\n        display: flex;\r\n        align-items: flex-end;\r\n        gap: 10px;\r\n        font-size: 20px;\r\n      }\r\n\r\n      .item-content {\r\n        font-size: 16px;\r\n      }\r\n\r\n      hr {\r\n        border-color: rgb(250, 250, 250);\r\n      }\r\n\r\n      .item-bottom {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 16px;\r\n\r\n        .item-function {\r\n          display: flex;\r\n          gap: 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 底部功能\r\n  .footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 46px;\r\n    line-height: 46px;\r\n    background: linear-gradient(90deg,#f9211c,#ff6335);\r\n    color: #fff;\r\n    text-align: center;\r\n}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4fde1763&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4fde1763&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fde1763\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","toPay","model","value","defaultAddressId","callback","$$v","expression","_l","addressList","item","key","address_id","_v","_s","name","phone","addressDetail","setDefaultAddress","domProps","toAddressEdit","region","province","city","detail","delAddress","$router","push","staticRenderFns","addressGetDefaultIdAPI","request","get","addressGetListAPI","addressPostDefaultAPI","id","post","addressId","addressPostRemoveAPI","created","getList","getDefaultAddress","data","methods","defaultId","list","address","$toast","path","query","addressName","addressPhone","addressRegion","_Dialog","confirm","message","then","catch","mode","$route","obj","component"],"sourceRoot":""}